<?xml version="1.0" encoding="UTF-8"?>
<f:view 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head/>
    <h:body>

        <h:form id="form"  >
            <f:event type="preRenderComponent" listener="#{login.checkSession}"/>
            <f:event type="preRenderComponent" listener="#{addCustomer.initialize()}"/>    
            
            <p:tabView  activeIndex="#{addCustomer.activeIndex}">
                <p:tab title="Personal Information" transient="true">
                    <p:dialog transient="true" header="Car Info" widgetVar="scandialog" dynamic="true" style="position: fixed; top: 10px" position="center" showEffect="fade" hideEffect="fade" resizable="false" closeOnEscape="true"   >
                        <p:outputPanel id="dialogf" style="text-align:center; ">
                            <p:panelGrid  columns="2"  columnClasses="label,value" >
                                <f:facet name="header">
                                    <p:graphicImage value="#{addCustomer.streamedPassScan}"/> 
                                </f:facet>

                                <h:outputText value="Id:" />
                                <h:outputText value="id" />

                                <h:outputText value="Year" />
                                <h:outputText value="year" />


                            </p:panelGrid>
                        </p:outputPanel>
                    </p:dialog>
                    <p:panel header="Personal info:Part 1">
                        <h:panelGrid columns="2" cellpadding="100" >
                            <h:panelGrid columns="2" cellpadding="10">
                                <p:outputLabel for="firstnamepersian" value="Firstname(Persian):" />
                                <p:inputText id="firstnamepersian" value="#{addCustomer.personal.don361name}"  label="Firstname(Persian)">
                                </p:inputText>
                                <p:outputLabel for="firstname" value="Firstname:" />
                                <p:inputText id="firstname" value="#{addCustomer.personal.don361enName}"  label="Firstname">
                                </p:inputText>
                                <p:outputLabel for="lastnamepersian" value="Lasttname(Persian):" />
                                <p:inputText id="lastnamepersian" value="#{addCustomer.personal.don361familyName}"  label="Lastname(Persian)">
                                </p:inputText>
                                <p:outputLabel for="lastname" value="Lastname:" />
                                <p:inputText id="lastname" value="#{addCustomer.personal.don361enFamily}"  label="Lastname">
                                </p:inputText>
                                <p:outputLabel for="sex" value="Sex:" />
                                <p:selectOneMenu id="sex" value="#{addCustomer.rashtiSex}">

                                    <f:selectItem itemLabel="Male" itemValue="Male" />
                                    <f:selectItem itemLabel="Female" itemValue="Female" />
                                </p:selectOneMenu>
                                <p:outputLabel for="prefix" value="Prefix:" />
                                <p:inputText id="prefix" value="#{addCustomer.personal.don361prefix}"  label="Prefix">
                                </p:inputText>
                                <p:outputLabel for="fathernamepersian" value="FatherName(Persian):" />
                                <p:inputText id="fathernamepersian" value="#{addCustomer.personal.don361fHName}"  label="fathernamepersian">
                                </p:inputText>
                                <p:outputLabel for="fathername" value="FatherName:" />
                                <p:inputText id="fathername" value="#{addCustomer.personal.don361enFHName}"  label="Fathername">
                                </p:inputText>

                            </h:panelGrid>

                            <h:panelGrid columns="2" cellpadding="10" >


                                <p:outputLabel for="birthdate" value="Birthdate:" />
                                <p:calendar id="birthdate" value="#{addCustomer.personal.don361birthday}" locale="de" navigator="true" pattern="yyyy-MMM-dd" >
                                    <f:convertDateTime pattern="yyyy-MMM-dd"/>
                                </p:calendar>

                                <p:outputLabel for="melliCodenum" value="MelliCode Number:" />
                                <p:inputText id="melliCodenum" value="#{addCustomer.personal.don361birthCerNo}"  label="melliCodeNum">
                                </p:inputText>
                                <p:outputLabel for="Passportnum" value="Passport Number:" />
                                <p:inputText id="Passportnum" value="#{addCustomer.personal.don361passportNo}"  label="passportNum">
                                </p:inputText>
                                <p:outputLabel for="nationality" value="Nationality:" />
                                <p:inputText id="nationality" value="#{addCustomer.personal.don361birthPlace}"  label="nationality">
                                </p:inputText>

                            </h:panelGrid>
                        </h:panelGrid>
                    </p:panel>
                    <br/>
                    <p:panel header="Personal info:Part 2">
                        <h:panelGrid columns="2" cellpadding="100">
                            <h:panelGrid columns="2" cellpadding="10">
                                <p:outputLabel for="email" value="Email:" />
                                <p:inputText id="email" value="#{addCustomer.personal.don361personalMail}"  label="Email:">
                                </p:inputText>
                                <p:outputLabel for="mobilenum" value="Mobile Number:" />
                                <p:inputText id="mobilenum" value="#{addCustomer.personal.don361mobileNumber}"  label="MobileNumber">
                                </p:inputText>
                                <p:outputLabel for="homeNumber" value="Home Number:" />
                                <p:inputText id="homeNumber" value="#{addCustomer.personal.don361homeTel}"  label="homeNumber">
                                </p:inputText>
                                <p:outputLabel for="homefax" value="Home Fax:" />
                                <p:inputText id="homefax" value="#{addCustomer.personal.don361homeFax}"  label="homeFax">
                                </p:inputText>
                                <p:outputLabel value="Passport Scan:" />
                                <c:if test="#{!addCustomer.passScanAvailable}">
                                    <p:fileUpload rendered="#{!addCustomer.passScanAvailable}" value="#{addCustomer.passScan}" mode="advanced" dragDropSupport="true"
                                                  sizeLimit="1000000" allowTypes="/(\.|\/)(gif|jpe?g|png)$/" oncomplete="#{addCustomer.setpscan()}" update="@form"/>
                                </c:if>
                                <c:if test="#{addCustomer.passScanAvailable}">
                                    <p:commandButton   value="Show pic" onclick="PF('scandialog').show()"  />

                                </c:if>
                                <p:outputLabel  value="Shenasname Scan:" />
                                <p:button  value="Browse"></p:button>
                                <p:outputLabel  value="Photo Scan:" />
                                <p:button  value="Browse"></p:button>

                            </h:panelGrid>
                            <h:panelGrid columns="2" cellpadding="10">
                                <p:outputLabel for="homepostalcode" value="Postal Code(Home):" />
                                <p:inputText id="homepostalcode" value="#{addCustomer.personal.don361postalCode}"  label="postal code(home)">
                                </p:inputText>
                                <p:outputLabel value="Home Address(Persian):" />
                                <p:inputTextarea rows="6" id="homeaddresspersian" value="#{addCustomer.personal.don361homeAddress}"   cols="33" />


                                <p:outputLabel for="hobbies" value="Hobbies:" />
                                <p:inputTextarea rows="6" id="hobbies" value="#{addCustomer.personal.don361hobbies}"   cols="33" />
                                <p:outputLabel for="comments" value="Comments:" />
                                <p:inputTextarea rows="6" id="comments" value="#{addCustomer.personal.don361description}" cols="33" />
                            </h:panelGrid>
                        </h:panelGrid>

                    </p:panel>

                </p:tab>
                <p:tab title="Educational Information" transient="true">
                    <p:panel header="tabular tohkhom edu info">
                        <p:dataTable id="pastInfo" var="past" value="#{addCustomer.listPast}" editable="true" style="margin-bottom:20px" emptyMessage="There is no past educational information for this customer">
                            <f:facet name="header">
                                <p:commandButton value="Add"  action="#{addCustomer.addPast()}" icon="ui-icon-plus" update="pastInfo" />
                                Past Educational Information
                            </f:facet>

                            <p:ajax event="rowEdit" listener="#{addCustomer.onRowEdit}" update="@none" />
                            <p:ajax event="rowEditCancel" listener="#{addCustomer.onRowCancel}" update="@none" />

                            <p:column headerText="Field">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{past.don365eduField}" /></f:facet>
                                    <f:facet name="input"><p:inputText id="modelInput" value="#{past.don365eduField}" style="width: 100%;" /></f:facet>
                                </p:cellEditor>
                            </p:column>

                            <p:column headerText="Degree">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{past.don365degree}" /></f:facet>
                                    <f:facet name="input">
                                        <p:selectOneMenu value="#{past.don365degree}" style="width: 100%;">
                                            <f:selectItem itemLabel="Bachelor" itemValue="Bachelor" />
                                            <f:selectItem itemLabel="Master" itemValue="Master"/>
                                            <f:selectItem itemLabel="Phd" itemValue="Phd"/>

                                        </p:selectOneMenu></f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column headerText="Graduation Date">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{past.don365gradiationDate}" /></f:facet>
                                    <f:facet name="input"><p:inputText value="#{past.don365gradiationDate}" style="width:100%" /></f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column headerText="University name">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{past.don365uniName}" /></f:facet>
                                    <f:facet name="input"><p:inputText value="#{past.don365uniName}" style="width:100%" /></f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column headerText="University City">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{past.don365uniCity}" /></f:facet>
                                    <f:facet name="input"><p:inputText value="#{past.don365uniCity}" style="width:100%" /></f:facet>
                                </p:cellEditor>
                            </p:column>



                            <p:column style="width:32px">
                                <p:rowEditor />

                            </p:column>
                            <p:column style="width:32px">

                                <p:commandButton action="#{addCustomer.deletePastRow(past)}" value="X" style="background: transparent; border: transparent;" update="pastInfo" process="@form" />
                            </p:column>

                        </p:dataTable>    
                    </p:panel>










                    <p:panel header="Idaq educational info">

                        <p:dataTable id="eduInfo" var="idaq" value="#{addCustomer.listIdaq}" editable="true" style="margin-bottom:20px" emptyMessage="There is no idaq educational information for this customer">
                            <f:facet name="header">
                                <p:commandButton value="Add"  action="#{addCustomer.addIdaq()}" icon="ui-icon-plus" update="eduInfo" />
                                Idaq Educational Information
                            </f:facet>

                            <p:ajax event="rowEdit" listener="#{addCustomer.onRowEdit}" update="@none" />
                            <p:ajax event="rowEditCancel" listener="#{addCustomer.onRowCancel}" update="@none" />


                            <p:column headerText="Program Name">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{idaq.don364programName}" /></f:facet>
                                    <f:facet name="input">
                                        <p:selectOneMenu value="#{idaq.don364programName}" style="width: 100%;">
                                            <f:selectItem itemLabel="Bf1" itemValue="Bf1" />
                                            <f:selectItem itemLabel="Bf2" itemValue="Bf2"/>
                                            <f:selectItem itemLabel="MBA123" itemValue="MBA123"/>

                                        </p:selectOneMenu></f:facet>
                                </p:cellEditor>
                            </p:column>


                            <p:column headerText="Thesis Subject">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{idaq.don364thesisSubject}" /></f:facet>
                                    <f:facet name="input"><p:inputText value="#{idaq.don364thesisSubject}" style="width:100%" /></f:facet>
                                </p:cellEditor>
                            </p:column>

                            <p:column headerText="Supervisor">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{idaq.don364supervisor}" /></f:facet>
                                    <f:facet name="input"><p:inputText value="#{idaq.don364supervisor}" style="width:100%" /></f:facet>
                                </p:cellEditor>
                            </p:column>

                            <p:column headerText="First Payment">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{idaq.don364firstPayment}" /></f:facet>
                                    <f:facet name="input">
                                        <p:selectOneMenu value="#{idaq.don364firstPayment}" style="width: 100%;">
                                            <f:selectItem itemLabel="Not paid" itemValue="0" />
                                            <f:selectItem itemLabel="Paid" itemValue="1"/>

                                        </p:selectOneMenu></f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column headerText="Second Payment">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{idaq.don364secondPayment}" /></f:facet>
                                    <f:facet name="input">
                                        <p:selectOneMenu value="#{idaq.don364secondPayment}" style="width: 100%;">
                                            <f:selectItem itemLabel="Not paid"  itemValue="0" />
                                            
                                            <f:selectItem itemLabel="Paid"  itemValue="1"/>
                                        </p:selectOneMenu></f:facet>
                                </p:cellEditor>
                            </p:column>



                            <p:column headerText="other Payment">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{idaq.don364paymentDesc}" /></f:facet>
                                    <f:facet name="input"><p:inputText value="#{idaq.don364paymentDesc}" style="width:100%" /></f:facet>
                                </p:cellEditor>
                            </p:column>



                            <p:column style="width:32px">
                                <p:rowEditor />

                            </p:column>
                            <p:column style="width:32px">

                                <p:commandButton action="#{addCustomer.deleteIdaqRow(idaq)}" value="X" style="background: transparent; border: transparent;" update="eduInfo" process="@form" />
                            </p:column>

                        </p:dataTable> 





                    </p:panel>
                </p:tab>
                <p:tab title="Business Information" transient="true"    >
                    <p:panel header="Bussiness Information">
                        <h:panelGrid columns="2" cellpadding="10" >
                            <h:panelGrid columns="2" cellpadding="10" >
                                <p:outputLabel value="Bussiness Information" />
                                <p:commandButton value="Add new info" actionListener="#{addCustomer.addNewBussiness}"  />
                                <p:outputLabel value="Bussiness Name:" />
                                <p:inputText id="bussinessName" value="#{addCustomer.bussiness.don368bussName}"></p:inputText>
                                <p:outputLabel value="Position:" />
                                <p:inputText id="position" value="#{addCustomer.bussiness.don368position}"></p:inputText>
                                <p:outputLabel value="Address:" />
                                <p:inputTextarea rows="6" id="bussinessAddress" value="#{addCustomer.bussiness.don368bussAddress}" cols="33" />

                                <p:outputLabel value="Office Tel:" />
                                <p:inputText id="officeTel" value="#{addCustomer.bussiness.don368officeTel}"></p:inputText>
                                <p:outputLabel value="Office Fax:" />
                                <p:inputText id="officeFax" value="#{addCustomer.bussiness.don368fax}"></p:inputText>
                            </h:panelGrid>
                            <h:panelGrid columns="2" cellpadding="10" >
                                <p:outputLabel value="BussinessField:" />
                                <p:selectOneMenu id="bussinessField" value="#{addCustomer.bussiness.don368bussField}">

                                    <f:selectItem itemLabel="Food Industery" itemValue="Food Industery" />
                                    <f:selectItem itemLabel="Fabric Industery" itemValue="Fabric Industery" />
                                    <f:selectItem itemLabel="Civil Engineering" itemValue="Civil Engineering" />
                                </p:selectOneMenu> 
                                <p:outputLabel value="Website:" />
                                <p:inputText id="website" value="#{addCustomer.bussiness.don368bussWebsite}"></p:inputText>
                                <p:outputLabel value="Bussiness Email:" />
                                <p:inputText id="bussinessEmail" value="#{addCustomer.bussiness.don368bussMail}"></p:inputText>
                                <p:outputLabel value="Bussiness Tags:" />
                                <p:inputText id="bussinessTags" value="#{addCustomer.bussiness.don368tag}"></p:inputText>
                                <p:outputLabel value="Bussiness Branches:" />
                                <p:inputText id="bussinessBranches" value="#{addCustomer.bussiness.don368branchComp}"></p:inputText>
                                <p:outputLabel value="Secretary Name:" />
                                <p:inputText id="secretaryName" value="#{addCustomer.bussiness.don368secretaryName}"></p:inputText>
                                <p:outputLabel value="Secretary Tel:" />
                                <p:inputText id="secretaryTel" value="#{addCustomer.bussiness.don368secretaryTel}"></p:inputText>
                                <p:outputLabel value="Bussiness Description:" />
                                <p:inputText id="bussinessDescp" value="#{addCustomer.bussiness.don368bussDescreption}"></p:inputText>
                            </h:panelGrid>
                        </h:panelGrid>
                    </p:panel>
                    <p:panel header="Customer Value">
                        <h:panelGrid columns="2" cellpadding="10" >
                            <h:panelGrid columns="2" cellpadding="10" >
                                <p:outputLabel value="Financial Status:" />
                                <p:selectOneMenu id="financialStatus" value="#{addCustomer.customer.don360customerEcoRate}">
                                    <f:selectItem itemLabel="Select One" itemValue="" />
                                    <f:selectItem itemLabel="1" itemValue="1" />
                                    <f:selectItem itemLabel="2" itemValue="2" />
                                    <f:selectItem itemLabel="3" itemValue="3" />
                                    <f:selectItem itemLabel="4" itemValue="4" />
                                </p:selectOneMenu>     
                            </h:panelGrid>
                            <h:panelGrid columns="2" cellpadding="10" >
                                <p:outputLabel value="Customer Importance:" />
                                <p:selectOneMenu id="customerImportance" value="#{addCustomer.customer.don360customerRate}">
                                    <f:selectItem itemLabel="A" itemValue="A" />
                                    <f:selectItem itemLabel="B" itemValue="B" />
                                    <f:selectItem itemLabel="C" itemValue="C" />
                                </p:selectOneMenu>     
                            </h:panelGrid>
                        </h:panelGrid>
                    </p:panel>
                </p:tab>
            </p:tabView>
            <p:commandButton value="Submit" action="#{addCustomer.commitCustomer()}" ajax="false" type="submit"/>
            <p:commandButton value="Cancel" action="#{addCustomer.cancelCustomer()}" ajax="false" type="submit"/>

        </h:form>
    </h:body>
</f:view>