<?xml version="1.0" encoding="UTF-8"?>
<f:view 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head />

    <h:body>
        <h:form id="form">
            <p:growl id="growl1" showDetail="true"  />
            <p:dataTable id="customerTable" var="customer"  value="#{customerManager.customerList}" widgetVar="customersTable"
                         emptyMessage="No Customers found with given criteria" filteredValue="#{customerManager.filteredCustomers}" paginator="true" rows="10"
                         paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink} "
                         rowsPerPageTemplate="5,10,15" sortMode="multiple"  draggableColumns="true" selectionMode="single" rowKey="#{customer.don360id}" selection="#{customerManager.selectedCustomer}" >

                <f:facet name="header">
                    <p:commandButton style="float: left" value="Add" icon="ui-icon-plus" action="#{customerManager.addCustomer()}" type="submit" ajax="false"/>
                    <p:commandButton id="toggler" type="link" value="Columns" style="float:right" icon="ui-icon-calculator" />
                    <p:columnToggler datasource="customerTable" trigger="toggler" />
                    <p:outputPanel>
                        <h:outputText value="Search all avaiable fields:" />
                        <p:inputText id="globalFilter" onkeyup="PF('customersTable').filter()" style="width:150px" placeholder="Enter keyword"/>
                    </p:outputPanel>
                </f:facet>

                <p:column filterBy="#{customer.don360name}" headerText="Name" sortBy="#{customer.don360name}"  filterMatchMode="contains">
                    <h:outputText value="#{customer.don360name}" />
                </p:column>

                <p:column filterBy="#{customer.don360mobileno}" headerText="Tell(Mobile)"  filterMatchMode="contains">
                    <h:outputText value="#{customer.don360mobileno}" />
                </p:column>

                <p:column filterBy="#{customer.don360customerRate}" headerText="Class"  sortBy="#{customer.don360customerRate}" filterMatchMode="contains">

                    <h:outputText value="#{customer.don360customerRate}" />
                </p:column>

                <p:column filterBy="#{customer.don360customerEcoRate}" headerText="Payment Status" filterMatchMode="contains">
                    <h:outputText value="#{customer.don360customerEcoRate}" />
                </p:column>

                <p:column filterBy="#{customer.don360programs}" headerText="Programms" filterMatchMode="contains">
                    <h:outputText value="#{customer.don360programs}" />
                </p:column>
                <p:column filterBy="#{customer.don360bussinessNames}" headerText="Bussiness Name" filterMatchMode="contains">
                    <h:outputText value="#{customer.don360bussinessNames}" />
                </p:column>

                <p:column style="width:32px;text-align: center" >
                    <p:commandButton  icon="ui-icon-close" type="button" title="Delete">
                        <p:confirm/>
                    </p:commandButton>
                    <p:commandButton ajax="false" action="#{customerManager.viewCustomer(customer)}" icon="ui-icon-search" title="View"/>
                    <p:confirmDialog global="true" header="Confirmation" message="Are you sure?" showEffect="fade" hideEffect="explode">
                        <p:commandButton value="Yes" actionListener="#{customerManager.removeRow(customer)}"  styleClass="ui-confirmdialog-yes" icon="ui-icon-check"  update="@form"/>
                        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                    </p:confirmDialog>

                </p:column>

            </p:dataTable>
            <h:commandLink>
                <p:graphicImage name="/images/excel.png" />
                <p:dataExporter type="xls" target="customerTable" fileName="students" />
            </h:commandLink>

            <h:commandLink>
                <p:graphicImage name="/images/pdf.png" />
                <p:dataExporter type="pdf" target="customerTable" fileName="students" encoding="UTF-8"  pageOnly="true"/>
            </h:commandLink>



        </h:form>
    </h:body>
</f:view>